(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a59a5e6"],{"0817":function(t,e,a){"use strict";a("4b15")},2357:function(t,e,a){},"482f":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[e("b-button",{staticClass:"spinner",attrs:{disabled:""}},[e("b-spinner")],1)],1)])},i=[],o={name:"LoadingDialog",props:["show","cancel","confirm"]},n=o,l=(a("ef67"),a("2877")),c=Object(l["a"])(n,s,i,!1,null,"764a15da",null);e["a"]=c.exports},"4b15":function(t,e,a){},"5c30":function(t,e,a){"use strict";a("2357")},"686e":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("div",{staticClass:"mlBook"},[e("div",{staticClass:"row"},[t.showDialogBD?e("BookDetailDialog",{staticClass:"modal",attrs:{show:t.showDialogBD,cancel:t.cancel}},[e("div",{staticClass:"topVRN"},[e("div",{staticClass:"left"},[e("img",{staticClass:"imgBD",attrs:{src:t.book.image}})]),e("div",{staticClass:"right"},[e("label",{staticClass:"titleBD"},[e("strong",[t._v(t._s(t.book.title))])]),e("div",{staticClass:"contentRight"},[e("div",{staticClass:"bookInfoBD"},[e("div",[t._v("Người đăng: "),e("span",[t._v(t._s(t.book.user.fullname))])]),e("div",[t._v("Ngày đăng: "),e("span",[t._v(t._s(t._f("formatDate")(t.book.postedDate)))])]),e("div",[t._v("Thể loại: "),e("span",[t._v(t._s(t.book.category.name))])]),e("div",[t._v("Tác giả: "),e("span",[t._v(t._s(t.book.author))])]),e("div",[t._v("Nhà xuất bản: "),e("span",[t._v(t._s(t.book.publisher))])]),e("div",[t._v("Năm xuất bản: "),e("span",[t._v(t._s(t.book.year))])]),e("div",[t._v("Ngôn ngữ: "),e("span",[t._v(t._s(t.book.language))])]),e("div",[t._v("Số trang: "),e("span",[t._v(t._s(t.book.numberOfPages))])]),e("div",[t._v("Trọng lượng: "),e("span",[t._v(t._s(t.book.weight)+"g")])]),e("div",[t._v("Thời gian giao dịch: "),e("span",[t._v(t._s(t.book.numberOfDays)+" ngày")])]),e("div",[t._v("Giá bìa: "),e("span",{staticClass:"cover"},[t._v(t._s(t.book.coverPrice.toLocaleString())+"đ")])]),e("div",[t._v("Phí đặt cọc: "),e("span",{staticClass:"deposit"},[t._v(t._s(t.book.depositPrice.toLocaleString())+"đ")])]),t.book.isRent?e("div",[t._v("Phí thuê: "),e("span",{staticClass:"rent"},[t._v(t._s(t.book.rentFee.toLocaleString())+"đ")])]):t._e(),e("div",[t._v("Tình trạng: "+t._s(t.book.statusBook))])])])])])]):t._e(),t.showDialogFB?e("FeedbackDialog",{staticClass:"modal",attrs:{show:t.showDialogFB,cancel:t.cancel}},[0!=t.totalFeedbacks?e("div",{staticClass:"bookdetail-feedback"},[e("table",{staticClass:"table"},[e("thead",[e("tr",[e("td",[t._v("Mã đánh giá")]),e("td",[t._v("Mã người đánh giá")]),e("td",[t._v("Nội dung")]),e("td",[t._v("Ngày")]),e("td")])]),t._l(t.listFeedbacks,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",[t._v(t._s(a.id))]),e("td",[t._v(t._s(a.userId))]),e("td",[t._v(t._s(a.content))]),e("td",[t._v(t._s(t._f("format")(a.createdDate)))]),e("td",[e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small",on:{click:function(e){return t.HandleDelete(a.id,a.bookId)}}},[t._v("Xoá")])])])])}))],2)]):e("div",{staticClass:"bookdetail-feedback"},[e("div",{staticClass:"no-feedback"},[t._v("Chưa có đánh giá, bình luận!")])])]):t._e(),e("div",{staticClass:"col-lg-6"},[e("div",{staticClass:"user-data m-b-30"},[e("div",{staticClass:"titleMB"},[t._v("QUẢN LÝ SÁCH")]),e("hr"),e("div",{staticClass:"search-book"},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"selectCss",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter=e.target.multiple?a:a[0]},function(e){return t.onchange(e)}]}},t._l(t.listFilter,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])})),0),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Nhập tên sản phẩm"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("button",{on:{click:t.HandleSearch}},[t._v("Tìm")])])]),e("div",{staticClass:"table-responsive table-data"},[e("table",{staticClass:"table"},[t._m(0),t._l(t.listBooks,(function(a){return e("tbody",{key:a.id},[e("tr",[e("td",[e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small btn-router",on:{click:function(e){return t.openDialogBD(a.id)}}},[t._v("Xem ")])]),e("td",[t._v(t._s(a.id))]),e("td",[e("img",{attrs:{src:a.image,height:"90px",width:"65px"}})]),e("td",[t._v(t._s(a.user.fullname))]),e("td",{staticStyle:{"max-width":"300px"}},[t._v(t._s(a.title))]),e("td",[t._v(t._s(a.coverPrice.toLocaleString())+"đ")]),e("td",[t._v(t._s(a.depositPrice.toLocaleString())+"đ")]),e("td",[t._v(t._s(t._f("formatDate")(a.postedDate)))]),"Approved"==a.status?e("td",[e("span",{staticClass:"role approved"},[t._v("ĐÃ DUYỆT")])]):t._e(),"Denied"==a.status?e("td",[e("span",{staticClass:"role denied"},[t._v("ĐÃ HỦY")])]):t._e(),"Waiting"==a.status?e("td",[e("span",{staticClass:"role waiting"},[t._v("ĐANG ĐỢI")])]):t._e(),"Waiting"==a.status?e("td",[e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small",staticStyle:{display:"block"},on:{click:function(e){return t.HandleApproved(a.id)}}},[t._v("Duyệt ")]),e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small",staticStyle:{width:"53.5px"},on:{click:function(e){return t.HandleDenied(a.id)}}},[t._v("Hủy ")])]):t._e(),"Approved"==a.status?e("td",[e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small",staticStyle:{width:"53.5px"},on:{click:function(e){return t.HandleDenied(a.id)}}},[t._v("Huỷ ")])]):t._e(),"Denied"==a.status?e("td",[e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small",on:{click:function(e){return t.HandleApproved(a.id)}}},[t._v(" Duyệt ")])]):t._e(),e("td",[e("button",{staticClass:"au-btn au-btn-icon au-btn--brown au-btn--small btn-router",on:{click:function(e){return t.openDialogFB(a.id)}}},[t._v("XEM ")])])])])}))],2),e("div",{staticClass:"paging-book"},[""==t.filter?e("b-pagination",{staticClass:"page-number",attrs:{"total-rows":t.totalBook,"per-page":10},on:{input:t.getBooksAll},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Tất Cả"==t.filter?e("b-pagination",{staticClass:"page-number",attrs:{"total-rows":t.totalBook,"per-page":10},on:{input:t.getBooksAll},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đã Duyệt"==t.filter?e("b-pagination",{staticClass:"page-number",attrs:{"total-rows":t.totalBook,"per-page":10},on:{input:t.getBooksApproved},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đã Hủy"==t.filter?e("b-pagination",{staticClass:"page-number",attrs:{"total-rows":t.totalBook,"per-page":10},on:{input:t.getBooksDenied},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đang Đợi"==t.filter?e("b-pagination",{staticClass:"page-number",attrs:{"total-rows":t.totalBook,"per-page":10},on:{input:t.getBooksWaiting},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)])])]),e("LoadingDialog",{directives:[{name:"show",rawName:"v-show",value:t.spinner,expression:"spinner"}]})],1)])},i=[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("td",[t._v("Chi tiết")]),e("td",[t._v("Ảnh")]),e("td",[t._v("Mã sách")]),e("td",[t._v("Người đăng")]),e("td",[t._v("Tên sách")]),e("td",[t._v("Giá bìa")]),e("td",[t._v("Giá cọc")]),e("td",[t._v("Ngày đăng")]),e("td",[t._v("Trạng thái")]),e("td",[t._v("Duyệt/Hủy")]),e("td",[t._v("Đánh giá")])])])}],o=a("cde1"),n=a("fbfb"),l=a("482f"),c=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[e("div",{staticClass:"topDialog"},[e("div",{staticClass:"dialogTitle"},[t._v("CHI TIẾT SÁCH")]),e("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("X")])]),t._t("default")],2)])},r=[],d={name:"BookDetailDialog",props:["show","cancel"]},u=d,p=(a("8efd"),a("2877")),h=Object(p["a"])(u,c,r,!1,null,"7ae9ff5a",null),g=h.exports,v=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[e("div",{staticClass:"topDialog"},[e("div",{staticClass:"dialogTitle"},[t._v("ĐÁNH GIÁ")]),e("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("X")])]),t._t("default")],2)])},_=[],f={name:"FeedbackDialog",props:["show","cancel"]},b=f,k=(a("5c30"),Object(p["a"])(b,v,_,!1,null,"4c6a8f34",null)),y=k.exports,B={name:"GetBooks",components:{BookDetailDialog:g,LoadingDialog:l["a"],FeedbackDialog:y},data(){return{book:"",listBooks:"",totalBook:"",listFeedbacks:"",totalFeedbacks:"",search:"",isSearch:!1,spinner:!1,showDialogFB:!1,showDialogBD:!1,listFilter:["Tất Cả","Đã Duyệt","Đã Hủy","Đang Đợi"],filter:"Tất Cả",page:""}},created(){this.isSearch=!1,this.getBooksAll(1)},methods:{onchange(t){this.isSearch=!1,this.search="","Tất Cả"===t.target.value&&this.getBooksAll(1),"Đã Duyệt"===t.target.value&&this.getBooksApproved(1),"Đã Hủy"===t.target.value&&this.getBooksDenied(1),"Đang Đợi"===t.target.value&&this.getBooksWaiting(1)},getBooksAll(t){this.spinner=!0,this.isSearch?o["a"].callApi(n["d"].SEARCH_BOOK+t,"POST",{search:this.search}).then(e=>{this.listBooks=e.data.data,this.totalBook=e.data.numberOfRecords,this.page=t,this.spinner=!1}).catch(()=>{}):o["a"].callApi(n["d"].LIST_BOOK+t,"GET",{}).then(e=>{this.listBooks=e.data.data,this.totalBook=e.data.numberOfRecords,this.page=t,this.spinner=!1}).catch(()=>{})},getBooksApproved(t){this.spinner=!0,this.isSearch=!1,o["a"].callApi(n["d"].LIST_BOOK_APPROVED+t,"GET",{}).then(e=>{this.listBooks=e.data.data,this.totalBook=e.data.numberOfRecords,this.page=t,this.spinner=!1}).catch(()=>{})},getBooksDenied(t){this.spinner=!0,this.isSearch=!1,o["a"].callApi(n["d"].LIST_BOOK_DENIED+t,"GET",{}).then(e=>{this.listBooks=e.data.data,this.totalBook=e.data.numberOfRecords,this.page=t,this.spinner=!1}).catch(()=>{})},getBooksWaiting(t){this.spinner=!0,this.isSearch=!1,o["a"].callApi(n["d"].LIST_BOOK_WAITING+t,"GET",{}).then(e=>{this.listBooks=e.data.data,this.totalBook=e.data.numberOfRecords,this.page=t,this.spinner=!1}).catch(()=>{})},HandleApproved(t){this.spinner=!0,o["a"].callApi(n["d"].APPROVED_BOOK+t,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(""===this.filter&&this.getBooksAll(this.page),"Tất Cả"===this.filter&&this.getBooksAll(this.page),"Đã Duyệt"===this.filter&&this.getBooksApproved(this.page),"Đã Hủy"===this.filter&&this.getBooksDenied(this.page),"Đang Đợi"===this.filter&&this.getBooksWaiting(this.page))}).catch(()=>{alert("Duyệt không thành công!")})},HandleDenied(t){this.spinner=!0,o["a"].callApi(n["d"].DENIED_BOOK+t,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(""===this.filter&&this.getBooksAll(this.page),"Tất Cả"===this.filter&&this.getBooksAll(this.page),"Đã Duyệt"===this.filter&&this.getBooksApproved(this.page),"Đã Hủy"===this.filter&&this.getBooksDenied(this.page),"Đang Đợi"===this.filter&&this.getBooksWaiting(this.page))}).catch(()=>{alert("Hủy không thành công!")})},getBookById(t){this.spinner=!0,o["a"].callApi(n["d"].DETAIL_BOOK+t,"GET",{}).then(t=>{this.book=t.data.data,this.spinner=!1,this.showDialogBD=!0}).catch(()=>{})},getFeedback(t){this.spinner=!0;const e=n["d"].FEEDBACK_BOOK+t;o["a"].callApi(e,"GET",{}).then(t=>{this.listFeedbacks=t.data.data,this.totalFeedbacks=t.data.numberOfRecords,this.spinner=!1,this.showDialogFB=!0}).catch(()=>{})},HandleDelete(t,e){const a=n["d"].DELETE_FEEDBACK+t;o["a"].callApi(a,"DELETE",{}).then(t=>{"DELETE_SUCCESS"===t.data.message&&(this.getFeedback(e),console.log(alert("Xóa thành công!")))}).catch(()=>{alert("Xóa không thành công!")})},HandleSearch(){return this.search?(this.filter="",this.isSearch=!0):(this.filter="Tất Cả",this.isSearch=!1),this.getBooksAll(1)},openDialogBD(t){this.getBookById(t)},openDialogFB(t){this.getFeedback(t)},cancel(){this.showDialogBD=!1,this.showDialogFB=!1}},filters:{formatDate(t){return new Date(t).toLocaleDateString("en-GB")},format(t){return new Date(t).toLocaleString("en-GB")}}},D=B,m=(a("0817"),Object(p["a"])(D,s,i,!1,null,null,null));e["default"]=m.exports},"7d71":function(t,e,a){},"8efd":function(t,e,a){"use strict";a("7d71")},ae8c:function(t,e,a){},ef67:function(t,e,a){"use strict";a("ae8c")}}]);
//# sourceMappingURL=chunk-6a59a5e6.d8c29230.js.map