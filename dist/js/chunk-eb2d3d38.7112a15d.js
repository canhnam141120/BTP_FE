(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb2d3d38"],{1744:function(t,a,s){},"1f9a":function(t,a,s){"use strict";s("1744")},"5d9f":function(t,a,s){},a4b2:function(t,a,s){"use strict";s("5d9f")},aaca:function(t,a,s){t.exports=s.p+"img/user.3e879a68.png"},f5bf:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t._self._c;return a("Layout",[a("main",{staticStyle:{"flex-grow":"1"}},[t.showDialog?a("CreatePostDialog",{staticClass:"modal",attrs:{show:t.showDialog,cancel:t.cancel,save:t.save}},[a("div",{staticClass:"dialogBody"},[a("b-row",{staticClass:"post-content"},[a("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tiêu đề:")]),a("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-text",attrs:{type:"text",maxlength:"500",required:"",placeholder:"Nhập tiêu đề"},domProps:{value:t.title},on:{input:function(a){a.target.composing||(t.title=a.target.value)}}})])],1),a("div",{staticClass:"bottom-post"},[a("b-row",{staticClass:"post-content"},[a("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Nội dung:")]),a("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.content,expression:"content"}],staticClass:"input-text",staticStyle:{height:"400px",width:"550px"},attrs:{type:"text",maxlength:"2000",required:"",placeholder:"Nhập nội dung bài đăng"},domProps:{value:t.content},on:{input:function(a){a.target.composing||(t.content=a.target.value)}}})])],1),a("div",[a("b-row",{staticClass:"post-content"},[a("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Chọn ảnh:")]),a("b-col",{staticClass:"input-div",attrs:{cols:"6"}},[a("input",{staticClass:"input-text-short",attrs:{type:"file",title:" ",name:"image"},on:{change:t.handleFileUpload}})])],1),a("img",{staticStyle:{width:"300px",height:"300px","object-fit":"scale-down"},attrs:{src:t.imageSrc}})],1)],1)],1)]):t._e(),a("div",{staticClass:"body-blog"},[a("div",{staticClass:"title"},[t._v("TRẠM ĐỌC")]),a("div",{staticClass:"container-blog"},[this.$cookies.get("token")?a("div",{staticClass:"top"},[a("img",{staticClass:"userImageBI",attrs:{src:t.info.avatar}}),a("button",{staticClass:"createPost",on:{click:t.openDialog}},[t._v("Chia sẻ bài viết của bạn...")]),a("Icon",{staticClass:"iconBI",attrs:{icon:"jam:write-f"}}),a("Icon",{staticClass:"iconBI",attrs:{icon:"ic:baseline-emoji-emotions"}}),a("Icon",{staticClass:"iconBI",attrs:{icon:"material-symbols:image-rounded"}})],1):t._e(),a("div",{staticClass:"content"},[a("div",{staticClass:"search"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],attrs:{type:"text",placeholder:"Nhập tiêu đề"},domProps:{value:t.search},on:{input:function(a){a.target.composing||(t.search=a.target.value)}}}),a("button",{on:{click:t.HandleSearch}},[t._v("Tìm")])]),a("br"),a("hr"),a("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[a("div",{staticClass:"grid"},t._l(10,(function(t){return a("div",{key:t,staticClass:"item"},[a("b-card",{staticStyle:{height:"180px"},attrs:{"no-body":"","img-left":""}},[a("b-skeleton-img",{attrs:{"card-img":"left",width:"180px"}}),a("b-card",{staticStyle:{width:"413px",height:"180px"}},[a("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),a("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),a("b-skeleton",{attrs:{animation:"wave",width:"70%"}}),a("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),a("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),a("b-skeleton",{attrs:{animation:"wave",width:"70%"}})],1)],1)],1)})),0)]},proxy:!0}])},[a("div",{staticClass:"grid"},t._l(t.listPost,(function(e){return a("div",{key:e.id,staticClass:"item"},[a("router-link",{attrs:{to:{name:"PostDetail",query:{id:e.id}}}},[a("img",{staticClass:"post-image",attrs:{src:e.image}})]),a("button",{staticClass:"action"},[t._v("Xem chi tiết")]),a("div",{staticClass:"info"},[a("div",{staticClass:"post-title"},[t._v(t._s(e.title))]),a("div",[a("img",{attrs:{src:s("aaca")}}),t._v(t._s(e.user.fullname))]),a("div",{staticClass:"createDate"},[a("Icon",{staticClass:"iconTime",attrs:{icon:"ic:twotone-access-time"}}),t._v(t._s(t._f("formatDate")(e.createdDate)))],1),a("label",{staticClass:"post-content"},[t._v(t._s(e.content))])])],1)})),0)]),a("div",{staticClass:"paging"},[a("div",{staticClass:"page"},[a("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":10},on:{input:t.getListPost},scopedSlots:t._u([{key:"first-text",fn:function(){return[a("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[a("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[a("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[a("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:s,active:e}){return[e?a("b",{staticStyle:{color:"white"}},[t._v(t._s(s)+" ")]):a("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(s))])]}}]),model:{value:t.page,callback:function(a){t.page=a},expression:"page"}})],1)])],1)])])],1)])},i=[],o=s("cde1"),n=s("fbfb"),l=s("ebad"),c=s("5ea9"),r=s("48ac"),d=s.n(r),h=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[a("div",{staticClass:"dialogContent"},[t._m(0),t._t("default"),a("div",{staticClass:"dialogGroupBtn"},[a("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("Hủy")]),a("button",{staticClass:"dialogBtn",on:{click:t.save}},[t._v("Đăng")])])],2)])},u=[function(){var t=this,a=t._self._c;return a("div",[a("div",{staticClass:"dialogTitle"},[t._v("VIẾT BÀI")])])}],p={name:"CreatePostDialog",props:["show","cancel","save"]},g=p,v=(s("1f9a"),s("2877")),m=Object(v["a"])(g,h,u,!1,null,"78b98718",null),f=m.exports,b={name:"BlogIndex",components:{Layout:l["a"],Icon:c["a"],CreatePostDialog:f},data(){return{listPost:"",totalPost:"",info:"",search:"",isSearch:!1,loading:!1,showDialog:!1,title:"",content:"",imageSrc:""}},created(){this.isSearch=!1,this.getListPost(1),this.getMyInformation()},methods:{getListPost(t){if(this.loading=!0,this.isSearch){window.scrollTo(0,0);const a=n["k"].SEARCH_POST+t;o["a"].callApi(a,"POST",{search:this.search}).then(t=>{this.listPost=t.data.data,this.totalPost=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})}else{window.scrollTo(0,0);const a=n["k"].LIST_POST+t;o["a"].callApi(a,"GET",{}).then(t=>{this.listPost=t.data.data,this.totalPost=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})}},HandleSearch(){return this.search?this.isSearch=!0:this.isSearch=!1,this.ChangePage(1)},getMyInformation(){let t=this.$cookies.get("token");this.userByToken=d.a.decode(t,"utf-8"),o["a"].callApi(n["j"].INFORMATION,"POST",{userId:this.userByToken.UserId}).then(t=>{this.info=t.data.data}).catch(()=>{})},openDialog(){this.showDialog=!0},cancel(){this.showDialog=!1},save(){let t=this.$cookies.get("token");this.userByToken=d.a.decode(t,"utf-8"),o["a"].callApi(n["k"].CREATE_POST,"POST",{image:this.imageSrc,userId:this.userByToken.UserId,title:this.title,content:this.content}).then(t=>{"CREATE_SUCCESS"===t.data.message&&(console.log(alert("Đăng bài thành công")),this.showDialog=!1)}).catch(()=>{})},handleFileUpload(t){const a=document.querySelector("input[type=file]").files[0];var s=t.target.files;if(!s[0])return;const e=new FileReader;var i;e.onloadend=()=>{i=e.result,this.imageSrc=i},console.log(this.imageSrc),e.readAsDataURL(a)}},filters:{formatDate(t){return new Date(t).toLocaleString("en-GB")}}},C=b,w=(s("a4b2"),Object(v["a"])(C,e,i,!1,null,null,null));a["default"]=w.exports}}]);
//# sourceMappingURL=chunk-eb2d3d38.7112a15d.js.map