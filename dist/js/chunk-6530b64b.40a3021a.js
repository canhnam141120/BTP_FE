(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6530b64b"],{"0cf7":function(t,s,e){},"413a":function(t,s,e){"use strict";e("0cf7")},"441e":function(t,s,e){"use strict";e("e054")},"482f":function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[s("div",{staticClass:"dialogContent"},[s("b-button",{staticClass:"spinner",attrs:{disabled:""}},[s("b-spinner")],1)],1)])},a=[],o={name:"LoadingDialog",props:["show","cancel","confirm"]},n=o,l=(e("ef67"),e("2877")),r=Object(l["a"])(n,i,a,!1,null,"764a15da",null);s["a"]=r.exports},"96ec":function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[s("div",{staticClass:"dialogContent"},[t._t("default")],2)])},a=[],o={name:"ConfirmDialog",props:["show"]},n=o,l=(e("9984"),e("2877")),r=Object(l["a"])(n,i,a,!1,null,"ba3e2db0",null);s["a"]=r.exports},9984:function(t,s,e){"use strict";e("9eea")},"9eea":function(t,s,e){},ae8c:function(t,s,e){},af73:function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("Layout",[s("main",{staticStyle:{"flex-grow":"1"}},[s("div",{staticClass:"myPost"},[s("LoadingDialog",{directives:[{name:"show",rawName:"v-show",value:t.spinner,expression:"spinner"}],staticStyle:{"z-index":"999999"}}),t.showDialog?s("CreatePostDialog",{staticClass:"modal",attrs:{show:t.showDialog,cancel:t.cancel,save:t.save}},[s("div",[s("div",{staticClass:"dialogTitle"},[t._v("SỬA BÀI VIẾT")])]),s("div",{staticClass:"dialogBody"},[s("b-row",{staticClass:"post-content"},[s("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tiêu đề:")]),s("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"input-text",attrs:{type:"text",maxlength:"500",required:"",placeholder:"Nhập tiêu đề"},domProps:{value:t.post.title},on:{input:function(s){s.target.composing||t.$set(t.post,"title",s.target.value)}}})])],1),s("div",{staticClass:"bottom-post"},[s("b-row",{staticClass:"post-content"},[s("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Nội dung:")]),s("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.content,expression:"post.content"}],staticClass:"input-text",staticStyle:{height:"400px",width:"550px"},attrs:{type:"text",maxlength:"2000",required:"",placeholder:"Nhập nội dung bài đăng"},domProps:{value:t.post.content},on:{input:function(s){s.target.composing||t.$set(t.post,"content",s.target.value)}}})])],1),s("div",[s("b-row",{staticClass:"post-content"},[s("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Chọn ảnh:")]),s("b-col",{staticClass:"input-div",attrs:{cols:"6"}},[s("input",{staticClass:"input-text-short",attrs:{type:"file",title:" ",name:"image"},on:{change:t.uploadImage}})])],1),s("img",{staticStyle:{width:"300px",height:"300px","object-fit":"scale-down"},attrs:{src:t.post.image}})],1)],1)],1),s("div",{staticClass:"dialogGroupBtn"},[s("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("Hủy")]),s("button",{staticClass:"dialogBtn",on:{click:t.save}},[t._v("Lưu")])])]):t._e(),t.showConfirmDialog?s("ConfirmDialog",{staticClass:"modal",attrs:{show:t.showConfirmDialog}},[s("div",[s("div",{staticClass:"dialogTitle"},[t._v("XÁC NHẬN")]),s("div",{staticStyle:{color:"#9d6b54","text-align":"center"}},[t._v("Xác nhận ẩn bài viết!")]),s("div",{staticClass:"dialogGroupBtn"},[s("button",{staticClass:"dialogBtn",on:{click:t.cancelConfirmDialog}},[t._v("Hủy")]),s("button",{staticClass:"dialogBtn",on:{click:t.HandleConfirm}},[t._v("Xác nhận")])])])]):t._e(),t.showConfirmDialogShow?s("ConfirmDialog",{staticClass:"modal",attrs:{show:t.showConfirmDialogShow}},[s("div",[s("div",{staticClass:"dialogTitle"},[t._v("XÁC NHẬN")]),s("div",{staticStyle:{color:"#9d6b54","text-align":"center"}},[t._v("Xác nhận hiện bài viết!")]),s("div",{staticClass:"dialogGroupBtn"},[s("button",{staticClass:"dialogBtn",on:{click:t.cancelConfirmDialogShow}},[t._v("Hủy")]),s("button",{staticClass:"dialogBtn",on:{click:t.HandleConfirmShow}},[t._v("Xác nhận")])])])]):t._e(),t.responseFlag?s("b-alert",{staticStyle:{position:"absolute",right:"0","z-index":"999999"},attrs:{show:t.dismissCountDown,variant:"success"},on:{dismissed:function(s){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" "+t._s(t.responseMessage)+" ")]):s("b-alert",{staticStyle:{position:"absolute",right:"0","z-index":"999999"},attrs:{show:t.dismissCountDown,variant:"danger"},on:{dismissed:function(s){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" "+t._s(t.responseMessage)+" ")]),s("div",{staticClass:"containerMP"},[s("div",{staticClass:"left-contentMP"},[s("SideBar_Personal")],1),s("div",{staticClass:"right-contentMP"},[s("div",{staticClass:"titleMP"},[t._v("Bài viết của tôi")]),s("hr"),s("div",{staticClass:"searchMP"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"inputMP",attrs:{type:"text",placeholder:"Nhập tiêu đề bài viết"},domProps:{value:t.search},on:{input:function(s){s.target.composing||(t.search=s.target.value)}}}),s("button",{staticClass:"btnMP",on:{click:t.HandleSearch}},[t._v("Tìm")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"selectCss",on:{change:[function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.filter=s.target.multiple?e:e[0]},function(s){return t.onchange(s)}]}},t._l(t.listFilter,(function(e){return s("option",{key:e,domProps:{value:e}},[t._v(t._s(e))])})),0)]),s("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[s("div",{staticClass:"grid"},t._l(5,(function(t){return s("div",{key:t,staticClass:"item"},[s("b-card",{staticStyle:{height:"140px"},attrs:{"no-body":"","img-left":""}},[s("b-skeleton-img",{attrs:{"card-img":"left",width:"140px"}}),s("b-card",{staticStyle:{width:"850px",height:"140px"}},[s("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),s("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),s("b-skeleton",{attrs:{animation:"wave",width:"70%"}}),s("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),s("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),s("b-skeleton",{attrs:{animation:"wave",width:"70%"}})],1)],1)],1)})),0)]},proxy:!0}])},[0!=t.totalPost?s("div",{staticClass:"grid"},t._l(t.listPosts,(function(e){return s("div",{key:e.id,staticClass:"item"},[e.isHide||"Approved"!=e.status?s("div",{staticStyle:{position:"relative"}},[s("img",{staticClass:"post-image-hide",attrs:{src:e.image}}),e.isHide&&"Approved"==e.status?s("label",{staticClass:"labelHide"},[t._v("Đang ẩn")]):t._e(),e.isHide||"Waiting"!=e.status?t._e():s("label",{staticClass:"labelStatus"},[t._v("Đang đợi duyệt")]),e.isHide||"Denied"!=e.status?t._e():s("label",{staticClass:"labelStatus"},[t._v("Không được duyệt")])]):s("router-link",{attrs:{to:{name:"PostDetail",query:{id:e.id}}}},[s("img",{staticClass:"post-image",attrs:{src:e.image}})]),s("div",{staticClass:"info"},[s("div",{staticClass:"post-title"},[t._v(t._s(e.title))]),s("label",{staticClass:"post-content"},[t._v("Ngày đăng: "),s("strong",[t._v(t._s(t._f("formatDate")(e.createdDate)))])]),"Approved"==e.status?s("label",{staticClass:"post-content"},[t._v("Trạng thái: "),s("strong",[t._v("Đã được duyệt")])]):t._e(),"Denied"==e.status?s("label",{staticClass:"post-content"},[t._v("Trạng thái: "),s("strong",[t._v("Đã bị hủy")])]):t._e(),"Waiting"==e.status?s("label",{staticClass:"post-content"},[t._v("Trạng thái: "),s("strong",[t._v("Đang đợi duyệt")])]):t._e(),s("label",{staticClass:"post-content"},[t._v(t._s(e.content))])]),s("div",{staticClass:"gr-btn"},[s("button",{staticClass:"item-btn",on:{click:function(s){return t.openEditPostDialog(e.id)}}},[t._v("Sửa")]),"Approved"==e.status?s("div",[e.isHide?s("button",{staticClass:"item-btn",on:{click:function(s){return t.HandleShow(e.id)}}},[t._v("Hiện")]):s("button",{staticClass:"item-btn",on:{click:function(s){return t.HandleHide(e.id)}}},[t._v("Ẩn")])]):t._e()])],1)})),0):s("div",{staticClass:"noBook"},[t._v("Danh sách trống!")])]),0!=t.totalPost?s("div",{staticClass:"paging"},[s("div",{staticClass:"page"},[""==t.filter?s("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPosts},scopedSlots:t._u([{key:"first-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:e,active:i}){return[i?s("b",{staticStyle:{color:"white"}},[t._v(t._s(e)+" ")]):s("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(e))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(s){t.page=s},expression:"page"}}):t._e(),"Tất Cả"==t.filter?s("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPosts},scopedSlots:t._u([{key:"first-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:e,active:i}){return[i?s("b",{staticStyle:{color:"white"}},[t._v(t._s(e)+" ")]):s("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(e))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(s){t.page=s},expression:"page"}}):t._e(),"Đã Duyệt"==t.filter?s("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPostsApproved},scopedSlots:t._u([{key:"first-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:e,active:i}){return[i?s("b",{staticStyle:{color:"white"}},[t._v(t._s(e)+" ")]):s("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(e))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(s){t.page=s},expression:"page"}}):t._e(),"Đã Hủy"==t.filter?s("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPostsDenied},scopedSlots:t._u([{key:"first-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:e,active:i}){return[i?s("b",{staticStyle:{color:"white"}},[t._v(t._s(e)+" ")]):s("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(e))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(s){t.page=s},expression:"page"}}):t._e(),"Đang Đợi"==t.filter?s("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPostsWaiting},scopedSlots:t._u([{key:"first-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[s("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:e,active:i}){return[i?s("b",{staticStyle:{color:"white"}},[t._v(t._s(e)+" ")]):s("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(e))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(s){t.page=s},expression:"page"}}):t._e()],1)]):t._e()],1)])],1)])])},a=[],o=(e("14d9"),e("cde1")),n=e("fbfb"),l=e("2314"),r=e("ebad"),c=e("48ac"),h=e.n(c),p=e("482f"),d=e("e2e4"),g=e("96ec"),u=e("31f0"),v={name:"MyPosts",components:{SideBar_Personal:l["a"],Layout:r["a"],LoadingDialog:p["a"],CreatePostDialog:d["a"],ConfirmDialog:g["a"]},data(){return{responseFlag:!0,responseMessage:"",dismissSecs:5,dismissCountDown:0,showConfirmDialog:!1,showConfirmDialogShow:!1,tmpId:"",loading:!1,listPosts:"",totalPost:"",post:"",userId:"",listFilter:["Tất Cả","Đã Duyệt","Đã Hủy","Đang Đợi"],filter:"Tất Cả",page:1,search:"",isSearch:!1,spinner:!1,showDialog:!1}},created(){this.$cookies.get("token")||this.$router.push({name:"404Page"}),this.getMyPosts(1)},methods:{onchange(t){this.isSearch=!1,this.search="","Tất Cả"===t.target.value&&this.getMyPosts(1),"Đã Duyệt"===t.target.value&&this.getMyPostsApproved(1),"Đã Hủy"===t.target.value&&this.getMyPostsDenied(1),"Đang Đợi"===t.target.value&&this.getMyPostsWaiting(1)},getMyPosts(t){window.scroll(0,0),this.loading=!0;let s=this.$cookies.get("token");this.userByToken=h.a.decode(s,"utf-8"),this.isSearch?o["a"].callApi(n["i"].SEARCH_MY_POST+"?page="+t,"POST",{userId:this.userByToken.UserId,search:this.search}).then(s=>{this.listPosts=s.data.data,this.totalPost=s.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{}):o["a"].callApi(n["i"].LIST_POST+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listPosts=t.data.data,this.totalPost=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})},getMyPostsApproved(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let s=this.$cookies.get("token");this.userByToken=h.a.decode(s,"utf-8"),o["a"].callApi(n["i"].LIST_POST_APPROVED+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(s=>{this.listPosts=s.data.data,this.totalPost=s.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{})},getMyPostsDenied(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let s=this.$cookies.get("token");this.userByToken=h.a.decode(s,"utf-8"),o["a"].callApi(n["i"].LIST_POST_DENIED+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(s=>{this.listPosts=s.data.data,this.totalPost=s.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{})},getMyPostsWaiting(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let s=this.$cookies.get("token");this.userByToken=h.a.decode(s,"utf-8"),o["a"].callApi(n["i"].LIST_POST_WAITING+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(s=>{this.listPosts=s.data.data,this.totalPost=s.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{})},HandleHide(t){this.tmpId=t,this.showConfirmDialog=!0},cancelConfirmDialog(){this.showConfirmDialog=!1},HandleConfirm(){window.scroll(0,0),o["a"].callApi(n["j"].HIDE_POST+this.tmpId,"PUT",{}).then(t=>{"SUCCESS"===t.data.message?(this.responseFlag=!0,this.responseMessage="Ẩn bài viết thành công!",""===this.filter&&this.getMyPosts(this.page),"Tất Cả"===this.filter&&this.getMyPosts(this.page),"Đã Duyệt"===this.filter&&this.getMyPostsApproved(this.page),"Đã Hủy"===this.filter&&this.getPostsDenied(this.page),"Đang Đợi"===this.filter&&this.getMyPostsWaiting(this.page)):(this.responseFlag=!1,this.responseMessage="Có lỗi xảy ra! Vui lòng thử lại sau!"),this.dismissCountDown=this.dismissSecs,this.showConfirmDialog=!1}).catch(()=>{this.responseFlag=!1,this.responseMessage="Có lỗi xảy ra! Vui lòng thử lại sau!",this.dismissCountDown=this.dismissSecs,this.showConfirmDialog=!1})},HandleShow(t){this.tmpId=t,this.showConfirmDialogShow=!0},cancelConfirmDialogShow(){this.showConfirmDialogShow=!1},HandleConfirmShow(){window.scroll(0,0),o["a"].callApi(n["j"].SHOW_POST+this.tmpId,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(this.responseFlag=!0,this.responseMessage="Hiện bài viết thành công!",""===this.filter&&this.getMyPosts(this.page),"Tất Cả"===this.filter&&this.getMyPosts(this.page),"Đã Duyệt"===this.filter&&this.getMyPostsApproved(this.page),"Đã Hủy"===this.filter&&this.getPostsDenied(this.page),"Đang Đợi"===this.filter&&this.getMyPostsWaiting(this.page),this.dismissCountDown=this.dismissSecs,this.showConfirmDialogShow=!1)}).catch(()=>{this.responseFlag=!1,this.responseMessage="Có lỗi xảy ra! Vui lòng thử lại sau!",this.dismissCountDown=this.dismissSecs,this.showConfirmDialogShow=!1})},HandleSearch(){return this.search?(this.filter="",this.isSearch=!0):(this.filter="Tất Cả",this.isSearch=!1),this.getMyPosts(1)},getPostById(t){const s=n["f"].DETAIL_POST+t;o["a"].callApi(s,"GET",{}).then(t=>{this.post=t.data.data}).catch(()=>{})},openEditPostDialog(t){this.post="",this.getPostById(t),this.showDialog=!0},cancel(){this.showDialog=!1},save(){window.scroll(0,0);const t=n["j"].UPDATE_POST+this.post.id;o["a"].callApi(t,"PUT",{title:this.post.title,content:this.post.content,image:this.post.image}).then(t=>{"UPDATE_SUCCESS"==t.data.message?(this.responseMessage="",this.responseFlag=!0,this.responseMessage="Bài viết của bạn đã được gửi lại QTV để duyệt!",""===this.filter&&this.getMyPosts(this.page),"Tất Cả"===this.filter&&this.getMyPosts(this.page),"Đã Duyệt"===this.filter&&this.getMyPostsApproved(this.page),"Đã Hủy"===this.filter&&this.getPostsDenied(this.page),"Đang Đợi"===this.filter&&this.getMyPostsWaiting(this.page)):(this.responseFlag=!1,this.responseMessage="Có lỗi xảy ra! Vui lòng thử lại!"),this.showDialog=!1,this.dismissCountDown=this.dismissSecs}).catch(()=>{})},async uploadImage(){const t=document.querySelector("input[type=file]").files[0],s=await Object(u["a"])(t.name);await fetch(s,{method:"PUT",headers:{"Content-Type":"image/jpeg"},body:t});const e=s.split("?")[0];this.post.image=e},countDownChanged(t){this.dismissCountDown=t}},filters:{formatDate(t){return new Date(t).toLocaleString("en-GB")}}},f=v,y=(e("413a"),e("2877")),m=Object(y["a"])(f,i,a,!1,null,null,null);s["default"]=m.exports},e054:function(t,s,e){},e2e4:function(t,s,e){"use strict";var i=function(){var t=this,s=t._self._c;return s("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[s("div",{staticClass:"dialogContent"},[t._t("default")],2)])},a=[],o={name:"CreatePostDialog",props:["show","cancel","save"]},n=o,l=(e("441e"),e("2877")),r=Object(l["a"])(n,i,a,!1,null,"dbfbe0e6",null);s["a"]=r.exports},ef67:function(t,s,e){"use strict";e("ae8c")}}]);
//# sourceMappingURL=chunk-6530b64b.40a3021a.js.map