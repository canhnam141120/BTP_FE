(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d8fb1ae8"],{"0dc6":function(t,e,s){},"39c6":function(t,e,s){"use strict";s("0dc6")},"43a1":function(t,e,s){"use strict";s.r(e);var o=function(){var t=this,e=t._self._c;return e("Layout",[e("main",{staticStyle:{"flex-grow":"1"}},[e("LoadingDialog",{directives:[{name:"show",rawName:"v-show",value:t.spinner,expression:"spinner"}],staticStyle:{"z-index":"999999"}}),e("div",{staticClass:"VR"},[t.showDialog?e("CreateBookDialog",{staticClass:"modal",attrs:{show:t.showDialog,cancel:t.cancel,save:t.save}},[e("div",[e("div",{staticClass:"dialogTitle"},[t._v("CHỈNH SỬA SÁCH")])]),e("div",{staticClass:"top-form"},[e("div",{staticClass:"left-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tiêu đề:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.title,expression:"book.title"}],staticClass:"input-text",attrs:{type:"text",disabled:""},domProps:{value:t.book.title},on:{input:function(e){e.target.composing||t.$set(t.book,"title",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tác giả:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.author,expression:"book.author"}],staticClass:"input-text",attrs:{type:"text",disabled:""},domProps:{value:t.book.author},on:{input:function(e){e.target.composing||t.$set(t.book,"author",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Thể loại:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.category.name,expression:"book.category.name"}],staticClass:"input-text",attrs:{type:"text",disabled:""},domProps:{value:t.book.category.name},on:{input:function(e){e.target.composing||t.$set(t.book.category,"name",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Ngôn ngữ:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.language,expression:"book.language"}],staticClass:"input-text",attrs:{type:"text",disabled:""},domProps:{value:t.book.language},on:{input:function(e){e.target.composing||t.$set(t.book,"language",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Nhà XB:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.publisher,expression:"book.publisher"}],staticClass:"input-text",attrs:{type:"text",disabled:""},domProps:{value:t.book.publisher},on:{input:function(e){e.target.composing||t.$set(t.book,"publisher",e.target.value)}}})])],1)],1),e("div",{staticClass:"mid-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Năm XB:")]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.year,expression:"book.year"}],staticClass:"input-text-short",attrs:{type:"number",disabled:""},domProps:{value:t.book.year},on:{input:function(e){e.target.composing||t.$set(t.book,"year",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Số trang:")]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.numberOfPages,expression:"book.numberOfPages"}],staticClass:"input-text-short",attrs:{type:"number",disabled:""},domProps:{value:t.book.numberOfPages},on:{input:function(e){e.target.composing||t.$set(t.book,"numberOfPages",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Khối lượng:")]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.weight,expression:"book.weight"}],staticClass:"input-text-short",attrs:{type:"number",disabled:""},domProps:{value:t.book.weight},on:{input:function(e){e.target.composing||t.$set(t.book,"weight",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Chọn ảnh:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"6"}},[e("input",{staticClass:"input-text-short",attrs:{type:"file",title:" "},on:{change:t.handleFileUpload}})])],1)],1),e("div",{staticClass:"right-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"grCb",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.isExchange,expression:"book.isExchange"}],staticClass:"checkB",attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.book.isExchange)?t._i(t.book.isExchange,"true")>-1:t.book.isExchange},on:{change:function(e){var s=t.book.isExchange,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i="true",n=t._i(s,i);o.checked?n<0&&t.$set(t.book,"isExchange",s.concat([i])):n>-1&&t.$set(t.book,"isExchange",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.book,"isExchange",a)}}}),t._v(" Trao đổi  "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.isRent,expression:"book.isRent"}],staticClass:"checkB",attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.book.isRent)?t._i(t.book.isRent,"true")>-1:t.book.isRent},on:{change:function(e){var s=t.book.isRent,o=e.target,a=!!o.checked;if(Array.isArray(s)){var i="true",n=t._i(s,i);o.checked?n<0&&t.$set(t.book,"isRent",s.concat([i])):n>-1&&t.$set(t.book,"isRent",s.slice(0,n).concat(s.slice(n+1)))}else t.$set(t.book,"isRent",a)}}}),t._v(" Thuê ")])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Giá bìa:")]),e("b-col",{attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.coverPrice,expression:"book.coverPrice"}],staticClass:"input-text-short",attrs:{type:"number",maxlength:"50",required:"",placeholder:"Nhập giá bìa"},domProps:{value:t.book.coverPrice},on:{input:function(e){e.target.composing||t.$set(t.book,"coverPrice",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Giá đặt cọc:")]),e("b-col",{attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.depositPrice,expression:"book.depositPrice"}],staticClass:"input-text-short",attrs:{type:"number",maxlength:"50",required:"",placeholder:"Nhập giá đặt cọc"},domProps:{value:t.book.depositPrice},on:{input:function(e){e.target.composing||t.$set(t.book,"depositPrice",e.target.value)}}})])],1),t.book.isRent?e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Giá thuê:")]),e("b-col",{attrs:{cols:"3"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.book.rentFee,expression:"book.rentFee"}],staticClass:"input-text-short",attrs:{type:"number",maxlength:"7",required:"",placeholder:"Giá thuê"},domProps:{value:t.book.rentFee},on:{input:function(e){e.target.composing||t.$set(t.book,"rentFee",e.target.value)}}})])],1):t._e()],1),e("div",{staticClass:"img-form"},[e("img",{staticStyle:{width:"190px",height:"260px",border:"1px solid #9D6B54"},attrs:{src:t.book.image}})])]),e("div",{staticClass:"bottom-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"60px"},attrs:{cols:"2"}},[t._v("Tình trạng:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.statusBook,expression:"book.statusBook"}],staticClass:"input-text",staticStyle:{height:"100px",width:"1200px"},attrs:{type:"text",maxlength:"50",required:"",placeholder:"Nhập tình trạng sách"},domProps:{value:t.book.statusBook},on:{input:function(e){e.target.composing||t.$set(t.book,"statusBook",e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"60px"},attrs:{cols:"2"}},[t._v("Nội dung:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.book.description,expression:"book.description"}],staticClass:"input-text",staticStyle:{height:"100px",width:"1200px"},attrs:{type:"text",disabled:""},domProps:{value:t.book.description},on:{input:function(e){e.target.composing||t.$set(t.book,"description",e.target.value)}}})])],1)],1),e("div",{staticClass:"dialogGroupBtn"},[e("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("Hủy")]),e("button",{staticClass:"dialogBtn",on:{click:t.save}},[t._v("Lưu")])])]):t._e(),e("div",{staticClass:"containerVR"},[e("div",{staticClass:"left-contentVR"},[e("SideBar_Personal")],1),e("div",{staticClass:"right-contentVR"},[e("div",{staticClass:"topVR"},[e("div",{staticClass:"left"},[e("img",{staticClass:"imgBD",attrs:{src:t.book.image}}),e("div",{staticStyle:{"text-align":"center","margin-bottom":"10px","margin-top":"10px"}},[t.book.isTrade?e("label",{staticClass:"book-statusMB",staticStyle:{color:"red","font-weight":"bold"}},[t._v("Đang giao dịch")]):e("label",{staticClass:"book-statusMB",staticStyle:{color:"green","font-weight":"bold"}},[t._v("Sẵn sàng")])]),e("div",{staticClass:"extra"},[e("button",{staticClass:"editBtn",on:{click:t.openDialog}},[t._v("Chỉnh sửa")])])]),e("div",{staticClass:"right"},[e("label",{staticClass:"titleBD"},[e("strong",[t._v(t._s(t.book.title))])]),t.book.isReady&&"Approved"==t.book.status?e("button",{staticClass:"hideBtn",on:{click:function(e){return t.HandleHide(t.book.id)}}},[t._v("Ẩn")]):t._e(),0==t.book.isReady&&"Approved"==t.book.status?e("button",{staticClass:"hideBtn",on:{click:function(e){return t.HandleShow(t.book.id)}}},[t._v("Hiện")]):t._e(),e("div",{staticClass:"contentRight"},[e("div",{staticClass:"bookInfoBD"},[e("div",[t._v("Thể loại: "),e("span",[t._v(t._s(t.book.category.name))])]),e("div",[t._v("Tác giả: "),e("span",[t._v(t._s(t.book.author))])]),e("div",[t._v("Nhà xuất bản: "),e("span",[t._v(t._s(t.book.publisher))])]),e("div",[t._v("Năm xuất bản: "),e("span",[t._v(t._s(t.book.year))])]),e("div",[t._v("Ngôn ngữ: "),e("span",[t._v(t._s(t.book.language))])]),e("div",[t._v("Số trang: "),e("span",[t._v(t._s(t.book.numberOfPages))])]),e("div",[t._v("Trọng lượng: "),e("span",[t._v(t._s(t.book.weight)+"g")])]),e("div",[t._v("Thời gian giao dịch: "),e("span",[t._v(t._s(t.book.numberOfDays)+" ngày")])]),e("div",[t._v("Tình trạng: "+t._s(t.book.statusBook))]),"Approved"==t.book.status?e("div",[t._v("Trạng thái: "),e("strong",{staticStyle:{color:"green"}},[t._v("Đã được duyệt")])]):t._e(),"Denied"==t.book.status?e("div",[t._v("Trạng thái: "),e("strong",{staticStyle:{color:"red"}},[t._v("Đã bị hủy")])]):t._e(),"Waiting"==t.book.status?e("div",[t._v("Trạng thái: "),e("strong",[t._v("Đang đợi duyệt")])]):t._e(),e("div",[t._v("Giá bìa: "),e("span",{staticClass:"cover"},[t._v(t._s(t.book.coverPrice.toLocaleString())+"đ")])]),e("div",[t._v("Phí đặt cọc: "),e("span",{staticClass:"deposit"},[t._v(t._s(t.book.depositPrice.toLocaleString())+"đ")])]),t.book.isRent?e("div",[t._v("Phí thuê: "),e("span",{staticClass:"rent"},[t._v(t._s(t.book.rentFee.toLocaleString())+"đ")])]):t._e()])])])]),e("hr"),e("div",{staticClass:"bottomVR"},[e("div",{staticClass:"title-bottom"},[t._v("Yêu cầu muốn đổi")]),e("div",{staticClass:"gridMB"},t._l(t.listRequestReceive,(function(o){return e("div",{key:o.id,staticClass:"itemMB"},[e("router-link",{attrs:{to:{name:"BookDetail",query:{id:o.bookOfferId}}}},[e("img",{attrs:{src:o.bookOffer.image}})]),e("div",{staticClass:"infoMB"},[e("div",{staticClass:"book-titleMB"},[t._v(t._s(o.bookOffer.title))]),e("div",{staticClass:"book-statusMB"},[e("img",{attrs:{src:s("aaca")}}),t._v(" "+t._s(o.bookOffer.user.fullname))]),e("div",{staticClass:"book-statusMB"},[t._v(t._s(o.bookOffer.category.name))]),e("label",{staticClass:"book-statusMB"},[t._v("Giá bìa: "),e("strong",[t._v(t._s(o.bookOffer.coverPrice.toLocaleString())+"đ")])]),e("label",{staticClass:"book-statusMB"},[t._v(t._s(o.bookOffer.statusBook))])]),e("div",{staticClass:"actionVR"},[e("button",{staticClass:"active",on:{click:function(e){return t.HandleApproved(o.id)}}},[t._v("Chấp nhận")]),e("button",{staticClass:"active",on:{click:function(e){return t.HandleDenied(o.id)}}},[t._v("Từ chối")])])],1)})),0)])])])],1)],1)])},a=[],i=s("2314"),n=s("ebad"),c=s("fbfb"),l=s("cde1"),r=s("48ac"),d=s.n(r),u=s("482f"),b=s("8b91"),v={name:"ViewRequestBook",components:{LoadingDialog:u["a"],SideBar_Personal:i["a"],Layout:n["a"],CreateBookDialog:b["a"]},data(){return{book:"",listRequestReceive:"",loading:!1,userId:"",userByToken:"",spinner:!1,showDialog:!1}},created(){this.getBookById(),this.getRequestReceived()},methods:{getBookById(){this.spinner=!0;const t=c["d"].DETAIL_BOOK+this.$route.query.id;l["a"].callApi(t,"GET",{}).then(t=>{this.book=t.data.data,this.spinner=!1}).catch(()=>{})},getRequestReceived(){let t=this.$cookies.get("token");this.userByToken=d.a.decode(t,"utf-8");const e=c["j"].LIST_REQUEST_RECEIVED+this.$route.query.id;l["a"].callApi(e,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listRequestReceive=t.data.data}).catch(()=>{})},HandleApproved(t){let e=this.$cookies.get("token");this.userByToken=d.a.decode(e,"utf-8");const s=c["l"].ACCEPT_REQUEST+t;l["a"].callApi(s,"PUT",{userId:this.userByToken.UserId}).then(t=>{"SUCCESS"===t.data.message&&(console.log(alert("Chấp nhận thành công")),this.getRequestReceived())}).catch(()=>{alert("Không thành công!")})},HandleDenied(t){let e=this.$cookies.get("token");this.userByToken=d.a.decode(e,"utf-8");const s=c["l"].DENIED_REQUEST+t;l["a"].callApi(s,"PUT",{userId:this.userByToken.UserId}).then(t=>{"SUCCESS"===t.data.message&&(console.log(alert("Hủy thành công")),this.getRequestReceived())}).catch(()=>{alert("Không thành công!")})},HandleHide(t){this.spinner=!0;const e=c["a"].HIDE_BOOK+t;l["a"].callApi(e,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(this.getBookById(),this.spinner=!1)}).catch(()=>{alert("Không thành công!")})},HandleShow(t){this.spinner=!0;const e=c["a"].SHOW_BOOK+t;l["a"].callApi(e,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(this.getBookById(),this.spinner=!1)}).catch(()=>{alert("Không thành công!")})},openDialog(){this.showDialog=!0},cancel(){this.showDialog=!1},save(){this.spinner=!0,l["a"].callApi(c["a"].EDIT_BOOK+this.book.id,"PUT",{categoryId:this.book.categoryId,title:this.book.title,description:this.book.description,author:this.book.author,publisher:this.book.publisher,year:this.book.year,language:this.book.language,numberOfPages:this.book.numberOfPage,weight:this.book.weight,coverPrice:this.book.coverPrice,image:this.book.image,depositPrice:this.book.depositPrice,statusBook:this.book.statusBook,isExchange:this.book.isExchange,isRent:this.book.isRent,rentFee:this.book.rentFee}).then(t=>{"UPDATE_SUCCESS"===t.data.message&&(this.showDialog=!1,this.spinner=!1)}).catch(()=>{})},handleFileUpload(t){const e=document.querySelector("input[type=file]").files[0];var s=t.target.files;if(!s[0])return;const o=new FileReader;var a;o.onloadend=()=>{a=o.result,this.book.image=a},o.readAsDataURL(e)}}},p=v,g=(s("39c6"),s("2877")),h=Object(g["a"])(p,o,a,!1,null,"7c050e1b",null);e["default"]=h.exports},"482f":function(t,e,s){"use strict";var o=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[e("b-button",{staticClass:"spinner",attrs:{disabled:""}},[e("b-spinner")],1)],1)])},a=[],i={name:"LoadingDialog",props:["show","cancel","confirm"]},n=i,c=(s("ef67"),s("2877")),l=Object(c["a"])(n,o,a,!1,null,"764a15da",null);e["a"]=l.exports},aaca:function(t,e,s){t.exports=s.p+"img/user.3e879a68.png"},ae8c:function(t,e,s){},ef67:function(t,e,s){"use strict";s("ae8c")}}]);
//# sourceMappingURL=chunk-d8fb1ae8.6b5d2c29.js.map