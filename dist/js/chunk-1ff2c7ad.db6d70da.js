(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1ff2c7ad"],{"2cfa":function(t,e,a){},"52da":function(t,e,a){"use strict";a("d404")},"66ff":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t._self._c;return e("Layout",[e("main",{staticStyle:{"flex-grow":"1"}},[t.showDialog?e("CreateBookDialog",{staticClass:"modal",attrs:{show:t.showDialog,cancel:t.cancel,save:t.save}},[e("div",[e("div",{staticClass:"dialogTitle"},[t._v("ĐĂNG SÁCH")])]),e("div",{staticClass:"top-form"},[e("div",{staticClass:"left-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tiêu đề "),t.title?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.title,expression:"title"}],staticClass:"input-text",attrs:{type:"text",maxlength:"100",required:"",placeholder:"Nhập tên sách"},domProps:{value:t.title},on:{input:function(e){e.target.composing||(t.title=e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tác giả "),t.author?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.author,expression:"author"}],staticClass:"input-text",attrs:{type:"text",maxlength:"50",required:"",placeholder:"Nhập tên tác giả"},domProps:{value:t.author},on:{input:function(e){e.target.composing||(t.author=e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Thể loại "),t.categoryId?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.categoryId,expression:"categoryId"}],staticClass:"input-text",attrs:{name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.categoryId=e.target.multiple?a:a[0]}}},t._l(t.listCategories,(function(a){return e("option",{key:a.id,domProps:{value:a.id}},[t._v(t._s(a.name))])})),0)])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Ngôn ngữ "),t.language?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.language,expression:"language"}],staticClass:"input-text",attrs:{name:"category"},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.language=e.target.multiple?a:a[0]}}},t._l(t.listLanguage,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a)+" ")])})),0)])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Nhà XB "),t.publisher?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.publisher,expression:"publisher"}],staticClass:"input-text",attrs:{type:"text",maxlength:"50",required:"",placeholder:"Nhập nhà xuất bản"},domProps:{value:t.publisher},on:{input:function(e){e.target.composing||(t.publisher=e.target.value)}}})])],1)],1),e("div",{staticClass:"mid-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"115px"},attrs:{cols:"2"}},[t._v("Năm XB "),t.year?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{attrs:{cols:"6"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.year,expression:"year"}],staticClass:"input-text-short",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.year=e.target.multiple?a:a[0]}}},t._l(t.listYear,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a)+" ")])})),0)])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"115px"},attrs:{cols:"2"}},[t._v("Số trang "),t.numberOfPage?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.numberOfPage,expression:"numberOfPage"}],staticClass:"input-text-short",attrs:{type:"number",min:"1",max:"9999",step:"1",required:"",placeholder:"Nhập số trang"},domProps:{value:t.numberOfPage},on:{input:[function(e){e.target.composing||(t.numberOfPage=e.target.value)},t.checkNegative]}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"116px"},attrs:{cols:"2"}},[t._v("Khối lượng(gr) "),t.weight?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.weight,expression:"weight"}],staticClass:"input-text-short",attrs:{type:"number",min:"100",max:"9999",step:"100",required:"",placeholder:"Nhập khối lượng"},domProps:{value:t.weight},on:{input:[function(e){e.target.composing||(t.weight=e.target.value)},t.checkNegative]}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"115px"},attrs:{cols:"2"}},[t._v("Chọn ảnh "),"https://book-trading-platform.s3.ap-northeast-1.amazonaws.com/default_book_cover_2015.jpg"===t.imageSrc?e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")]):e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1)]),e("b-col",{staticClass:"input-div",attrs:{cols:"6"}},[e("input",{staticClass:"input-text-short",staticStyle:{width:"215px"},attrs:{type:"file",title:" ",name:"image"},on:{change:t.uploadImage}})])],1)],1),e("div",{staticClass:"right-form"},[e("b-row",{staticClass:"book-content"},[e("div",[e("b-col",{staticClass:"grCb",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.isExchange,expression:"isExchange"}],staticClass:"checkB",attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.isExchange)?t._i(t.isExchange,"true")>-1:t.isExchange},on:{change:function(e){var a=t.isExchange,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i="true",l=t._i(a,i);s.checked?l<0&&(t.isExchange=a.concat([i])):l>-1&&(t.isExchange=a.slice(0,l).concat(a.slice(l+1)))}else t.isExchange=o}}}),t._v(" Trao đổi  "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.isRent,expression:"isRent"}],staticClass:"checkB",attrs:{type:"checkbox",value:"true"},domProps:{checked:Array.isArray(t.isRent)?t._i(t.isRent,"true")>-1:t.isRent},on:{change:function(e){var a=t.isRent,s=e.target,o=!!s.checked;if(Array.isArray(a)){var i="true",l=t._i(a,i);s.checked?l<0&&(t.isRent=a.concat([i])):l>-1&&(t.isRent=a.slice(0,l).concat(a.slice(l+1)))}else t.isRent=o}}}),t._v(" Thuê "),t.isExchange||t.isRent?t._e():e("div",{staticStyle:{color:"#ca0303","font-size":"12px","margin-left":"5px"}},[t._v("Vui lòng chọn ít nhất 1 dịch vụ ")])])],1)]),t.isExchange||t.isRent?e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"115px"},attrs:{cols:"2"}},[t._v("Giá bìa(đ) "),t.coverPrice?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.coverPrice,expression:"coverPrice"}],staticClass:"input-text-short",attrs:{type:"number",min:"10000",max:"9999999",step:"5000",maxlength:"7",required:"",placeholder:"Nhập giá bìa"},domProps:{value:t.coverPrice},on:{input:[function(e){e.target.composing||(t.coverPrice=e.target.value)},t.checkNegative]}})])],1):t._e(),t.isExchange||t.isRent?e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"115px"},attrs:{cols:"2"}},[t._v("Giá đặt cọc(đ) "),t.depositPrice?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.depositPrice,expression:"depositPrice"}],staticClass:"input-text-short",attrs:{type:"number",min:"10000",max:"9999999",step:"5000",maxlength:"7",required:"",placeholder:"Nhập giá đặt cọc"},domProps:{value:t.depositPrice},on:{input:[function(e){e.target.composing||(t.depositPrice=e.target.value)},t.checkNegative]}})])],1):t._e(),t.isRent?e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"115px"},attrs:{cols:"2"}},[t._v("Giá thuê(đ) "),t.rentFee?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{attrs:{cols:"6"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.rentFee,expression:"rentFee"}],staticClass:"input-text-short",attrs:{type:"number",min:"10000",max:"9999999",step:"5000",maxlength:"7",required:"",placeholder:"Nhập giá thuê"},domProps:{value:t.rentFee},on:{input:[function(e){e.target.composing||(t.rentFee=e.target.value)},t.checkNegative]}})])],1):t._e()],1),e("div",{staticClass:"img-form"},[e("img",{staticStyle:{width:"190px",height:"260px",border:"1px solid #9D6B54"},attrs:{src:t.imageSrc}})])]),e("div",{staticClass:"bottom-form"},[e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"85px"},attrs:{cols:"2"}},[t._v("Trạng thái "),t.statusBook?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.statusBook,expression:"statusBook"}],staticClass:"input-text",staticStyle:{height:"100px",width:"1200px"},attrs:{type:"text",maxlength:"250",required:"",placeholder:"Nhập trạng thái"},domProps:{value:t.statusBook},on:{input:function(e){e.target.composing||(t.statusBook=e.target.value)}}})])],1),e("b-row",{staticClass:"book-content"},[e("b-col",{staticClass:"input-label",staticStyle:{width:"85px"},attrs:{cols:"2"}},[t._v("Nội dung "),t.description?e("label",{staticStyle:{color:"green"}},[e("Icon",{attrs:{icon:"material-symbols:check-small-rounded"}})],1):e("label",{staticStyle:{color:"#ca0303"}},[t._v("*")])]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.description,expression:"description"}],staticClass:"input-text",staticStyle:{height:"100px",width:"1200px"},attrs:{type:"text",required:"",placeholder:"Nhập mô tả nội dung sách"},domProps:{value:t.description},on:{input:function(e){e.target.composing||(t.description=e.target.value)}}})])],1)],1),e("div",{staticClass:"dialogGroupBtn"},[e("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("Hủy")]),t.title&&t.author&&t.categoryId&&t.language&&t.publisher&&t.statusBook&&t.description&&t.year&&t.numberOfPage&&t.weight&&"https://book-trading-platform.s3.ap-northeast-1.amazonaws.com/default_book_cover_2015.jpg"!==t.imageSrc&&t.coverPrice&&t.depositPrice?e("button",{staticClass:"dialogBtn",on:{click:t.save}},[t._v("Xác nhận")]):e("button",{staticClass:"dialogBtnDisable",attrs:{disabled:""}},[t._v("Xác nhận")])])]):t._e(),t.responseFlag?e("b-alert",{staticStyle:{position:"absolute",right:"0","z-index":"999999"},attrs:{show:t.dismissCountDown,variant:"success"},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" "+t._s(t.responseMessage)+" ")]):e("b-alert",{staticStyle:{position:"absolute",right:"0","z-index":"999999"},attrs:{show:t.dismissCountDown,variant:"danger"},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" "+t._s(t.responseMessage)+" ")]),e("div",{staticClass:"MB"},[e("div",{staticClass:"containerMB"},[e("div",{staticClass:"left-contentMB"},[e("SideBar_Personal")],1),e("div",{staticClass:"right-contentMB"},[e("div",{staticClass:"titleMB"},[t._v("Tủ sách của tôi")]),e("hr"),e("div",{staticClass:"searchMB"},[e("div",[e("button",{staticClass:"create-book",on:{click:t.openDialog}},[e("Icon",{attrs:{icon:"material-symbols:add-circle-outline-rounded"}}),e("label",[t._v("Đăng sách")])],1)]),e("div",[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"inputMB",attrs:{type:"text",placeholder:"Nhập tiêu đề sách"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("button",{staticClass:"btnMB",on:{click:t.HandleSearch}},[t._v("Tìm")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"selectCss",on:{change:[function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter=e.target.multiple?a:a[0]},function(e){return t.onchange(e)}]}},t._l(t.listFilter,(function(a){return e("option",{key:a,domProps:{value:a}},[t._v(t._s(a))])})),0)])]),e("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[e("div",{staticClass:"gridMB"},t._l(6,(function(t){return e("div",{key:t,staticClass:"itemMB"},[e("b-card",{staticStyle:{height:"450px"},attrs:{"no-body":"","img-top":""}},[e("b-skeleton-img",{attrs:{"card-img":"top",aspect:"3:1",height:"290px"}}),e("b-card",{staticStyle:{height:"170px"}},[e("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"70%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"70%"}})],1)],1)],1)})),0)]},proxy:!0}])},[0!=t.totalBook?e("div",{staticClass:"gridMB"},t._l(t.listBook,(function(a){return e("div",{key:a.id,staticClass:"itemMB"},[a.isReady&&"Approved"==a.status?e("router-link",{staticStyle:{position:"relative"},attrs:{to:{name:"ViewRequestBook",query:{id:a.id}}}},[e("img",{staticClass:"book-image",attrs:{src:a.image}}),a.isTrade?e("label",{staticClass:"laye1"},[t._v("Đang giao dịch")]):e("label",{staticClass:"laye2"},[t._v("Sẵn sàng")])]):e("router-link",{staticClass:"active",staticStyle:{position:"relative"},attrs:{to:{name:"ViewRequestBook",query:{id:a.id}}}},[e("img",{staticClass:"book-image",attrs:{src:a.image}}),a.isReady||"Approved"!=a.status?t._e():e("label",{staticClass:"labelHideBook"},[t._v("Đang ẩn")]),a.isReady&&"Waiting"==a.status?e("label",{staticClass:"labelStatusBook"},[t._v("Đang đợi duyệt")]):t._e(),a.isReady&&"Denied"==a.status?e("label",{staticClass:"labelStatusBook"},[t._v("Không được duyệt")]):t._e()]),e("div",{staticClass:"infoMB"},[e("div",{staticClass:"book-titleMB"},[e("strong",[t._v(t._s(a.title))])]),e("div",{staticClass:"book-statusMB"},[t._v("Thể loại: "),e("strong",[t._v(t._s(a.category.name))])]),e("label",{staticClass:"book-statusMB"},[t._v("Giá cọc: "),e("strong",[t._v(t._s(a.depositPrice.toLocaleString())+"đ")])]),e("label",{staticClass:"book-statusMB"},[t._v(t._s(a.statusBook))])])],1)})),0):e("div",{staticClass:"noBook"},[t._v("Danh sách trống!")])]),0!=t.totalBook?e("div",{staticClass:"pagingMB"},[""==t.filter?e("b-pagination",{staticClass:"page-numberMB",attrs:{"total-rows":t.totalBook,"per-page":6},on:{input:t.getMyBooks},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Tất Cả"==t.filter?e("b-pagination",{staticClass:"page-numberMB",attrs:{"total-rows":t.totalBook,"per-page":6},on:{input:t.getMyBooks},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đã Duyệt"==t.filter?e("b-pagination",{staticClass:"page-numberMB",attrs:{"total-rows":t.totalBook,"per-page":6},on:{input:t.getMyBooksApproved},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đã Hủy"==t.filter?e("b-pagination",{staticClass:"page-numberMB",attrs:{"total-rows":t.totalBook,"per-page":6},on:{input:t.getMyBooksDenied},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đang Đợi"==t.filter?e("b-pagination",{staticClass:"page-numberMB",attrs:{"total-rows":t.totalBook,"per-page":6},on:{input:t.getMyBooksWaiting},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:a,active:s}){return[s?e("b",{staticStyle:{color:"white"}},[t._v(t._s(a)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(a))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1):t._e()],1)])])],1)])},o=[],i=(a("14d9"),a("cde1")),l=a("fbfb"),n=a("ebad"),r=a("2314"),c=a("48ac"),u=a.n(c),p=a("5ea9"),d=a("8b91"),g=a("31f0"),h={name:"MyBooks",components:{SideBar_Personal:r["a"],Layout:n["a"],Icon:p["a"],CreateBookDialog:d["a"]},data(){return{responseFlag:!0,responseMessage:"",dismissSecs:5,dismissCountDown:0,imageSrc:"https://book-trading-platform.s3.ap-northeast-1.amazonaws.com/default_book_cover_2015.jpg",listBook:"",totalBook:"",loading:!1,userByToken:"",userId:"",showDialog:!1,listCategories:"",listLanguage:["Tiếng Việt","Tiếng Anh","Tiếng Hán","Tiếng Hàn","Tiếng Nhật","Tiếng Tây Ban Nha","Tiếng Pháp","Tiếng Đức","Tiếng Nga","Tiếng Bồ Đào Nha","Tiếng Hindi","Khác"],listYear:["2022","2021","2020","2019","2018","2017","2016","2015","2014","2013","2012","2011","2010","2009","2008","2007","2006","2005","2004","2003","2002","2001","2000","1999","1998","1997","1996","1995","1994","1993","1992","1991","1990","1989"],listFilter:["Tất Cả","Đã Duyệt","Đã Hủy","Đang Đợi"],filter:"Tất Cả",search:"",isSearch:!1,page:1,title:"",categoryId:"",description:"",author:"",publisher:"",year:"",language:"",numberOfPage:"",weight:"",coverPrice:"",depositPrice:"",statusBook:"",isExchange:!1,isRent:!1,rentFee:0,image:""}},created(){this.$cookies.get("token")||this.$router.push({name:"404Page"}),this.getMyBooks(1)},methods:{onchange(t){this.isSearch=!1,this.search="","Tất Cả"===t.target.value&&this.getMyBooks(1),"Đã Duyệt"===t.target.value&&this.getMyBooksApproved(1),"Đã Hủy"===t.target.value&&this.getMyBooksDenied(1),"Đang Đợi"===t.target.value&&this.getMyBooksWaiting(1)},getMyBooks(t){window.scroll(0,0),this.loading=!0,this.userByToken=u.a.decode(this.$cookies.get("token"),"utf-8"),this.isSearch?i["a"].callApi(l["i"].SEARCH_MY_BOOK+"?page="+t,"POST",{userId:this.userByToken.UserId,search:this.search}).then(t=>{this.listBook=t.data.data,this.totalBook=t.data.numberOfRecords,this.loading=!1}).catch(()=>{}):i["a"].callApi(l["i"].LIST_BOOK+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listBook=t.data.data,this.totalBook=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})},getMyBooksApproved(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let e=this.$cookies.get("token");this.userByToken=u.a.decode(e,"utf-8"),i["a"].callApi(l["i"].LIST_BOOK_APPROVED+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listBook=t.data.data,this.totalBook=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})},getMyBooksDenied(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let e=this.$cookies.get("token");this.userByToken=u.a.decode(e,"utf-8"),i["a"].callApi(l["i"].LIST_BOOK_DENIED+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listBook=t.data.data,this.totalBook=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})},getMyBooksWaiting(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let e=this.$cookies.get("token");this.userByToken=u.a.decode(e,"utf-8"),i["a"].callApi(l["i"].LIST_BOOK_WAITING+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listBook=t.data.data,this.totalBook=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})},getCategories(){i["a"].callApi(l["d"].All_CATEGORY,"GET",{}).then(t=>{this.listCategories=t.data.data}).catch(()=>{})},openDialog(){this.getCategories(),this.showDialog=!0},cancel(){this.showDialog=!1},save(){this.userByToken=u.a.decode(this.$cookies.get("token"),"utf-8"),i["a"].callApi(l["a"].CREATE_BOOK,"POST",{image:this.imageSrc,userId:this.userByToken.UserId,title:this.title,description:this.description,categoryId:this.categoryId,author:this.author,publisher:this.publisher,year:this.year,language:this.language,numberOfPages:this.numberOfPage,weight:this.weight,coverPrice:this.coverPrice,depositPrice:this.depositPrice,statusBook:this.statusBook,isExchange:this.isExchange,isRent:this.isRent,rentFee:this.rentFee}).then(t=>{"CREATE_SUCCESS"===t.data.message?(this.getMyBooks(1),this.responseFlag=!0,this.responseMessage="Sách của bạn đã được gửi cho QTV để duyệt!"):(this.responseFlag=!1,this.responseMessage="Có lỗi xảy ra, vui lòng thử lại!!"),this.dismissCountDown=this.dismissSecs,this.showDialog=!1}).catch(()=>{this.dismissCountDown=this.dismissSecs,this.responseFlag=!1,this.responseMessage="Có lỗi xảy ra! Vui lòng thử lại sau!",this.showDialog=!1})},async uploadImage(){const t=document.querySelector("input[type=file]").files[0],e=await Object(g["a"])(t.name);await fetch(e,{method:"PUT",headers:{"Content-Type":"image/jpeg"},body:t});const a=e.split("?")[0];this.imageSrc=a},HandleSearch(){return this.search?(this.filter="",this.isSearch=!0):(this.filter="Tất Cả",this.isSearch=!1),this.getMyBooks(1)},countDownChanged(t){this.dismissCountDown=t},checkNegative(t){(t.target.value<=1||t.target.value>9999)&&(t.target.value="")}}},v=h,m=(a("52da"),a("2877")),y=Object(m["a"])(v,s,o,!1,null,null,null);e["default"]=y.exports},8136:function(t,e,a){"use strict";a("2cfa")},"8b91":function(t,e,a){"use strict";var s=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[t._t("default")],2)])},o=[],i={name:"CreateBookDialog",props:["show","cancel","save"]},l=i,n=(a("8136"),a("2877")),r=Object(n["a"])(l,s,o,!1,null,"08d523bd",null);e["a"]=r.exports},d404:function(t,e,a){}}]);
//# sourceMappingURL=chunk-1ff2c7ad.db6d70da.js.map