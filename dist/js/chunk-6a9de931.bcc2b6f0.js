(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a9de931"],{"441e":function(t,e,s){"use strict";s("e054")},"44ff":function(t,e,s){},"482f":function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[e("b-button",{staticClass:"spinner",attrs:{disabled:""}},[e("b-spinner")],1)],1)])},i=[],n={name:"LoadingDialog",props:["show","cancel","confirm"]},o=n,l=(s("ef67"),s("2877")),r=Object(l["a"])(o,a,i,!1,null,"764a15da",null);e["a"]=r.exports},6998:function(t,e,s){"use strict";s("44ff")},ae8c:function(t,e,s){},af73:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t._self._c;return e("Layout",[e("main",{staticStyle:{"flex-grow":"1"}},[e("div",{staticClass:"myPost"},[e("LoadingDialog",{directives:[{name:"show",rawName:"v-show",value:t.spinner,expression:"spinner"}],staticStyle:{"z-index":"999999"}}),t.showDialog?e("CreatePostDialog",{staticClass:"modal",attrs:{show:t.showDialog,cancel:t.cancel,save:t.save}},[e("div",[e("div",{staticClass:"dialogTitle"},[t._v("SỬA BÀI VIẾT")])]),e("div",{staticClass:"dialogBody"},[e("b-row",{staticClass:"post-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Tiêu đề:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.post.title,expression:"post.title"}],staticClass:"input-text",attrs:{type:"text",maxlength:"500",required:"",placeholder:"Nhập tiêu đề"},domProps:{value:t.post.title},on:{input:function(e){e.target.composing||t.$set(t.post,"title",e.target.value)}}})])],1),e("div",{staticClass:"bottom-post"},[e("b-row",{staticClass:"post-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Nội dung:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"9"}},[e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.post.content,expression:"post.content"}],staticClass:"input-text",staticStyle:{height:"400px",width:"550px"},attrs:{type:"text",maxlength:"2000",required:"",placeholder:"Nhập nội dung bài đăng"},domProps:{value:t.post.content},on:{input:function(e){e.target.composing||t.$set(t.post,"content",e.target.value)}}})])],1),e("div",[e("b-row",{staticClass:"post-content"},[e("b-col",{staticClass:"input-label",attrs:{cols:"2"}},[t._v("Chọn ảnh:")]),e("b-col",{staticClass:"input-div",attrs:{cols:"6"}},[e("input",{staticClass:"input-text-short",attrs:{type:"file",title:" ",name:"image"},on:{change:t.handleFileUpload}})])],1),e("img",{staticStyle:{width:"300px",height:"300px","object-fit":"scale-down"},attrs:{src:t.post.image}})],1)],1)],1),e("div",{staticClass:"dialogGroupBtn"},[e("button",{staticClass:"dialogBtn",on:{click:t.cancel}},[t._v("Hủy")]),e("button",{staticClass:"dialogBtn",on:{click:t.save}},[t._v("Lưu")])])]):t._e(),e("div",{staticClass:"containerMP"},[e("div",{staticClass:"left-contentMP"},[e("SideBar_Personal")],1),e("div",{staticClass:"right-contentMP"},[e("div",{staticClass:"titleMP"},[t._v("Bài viết của tôi")]),e("hr"),e("div",{staticClass:"searchMP"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.search,expression:"search"}],staticClass:"inputMP",attrs:{type:"text",placeholder:"Nhập tiêu đề bài viết"},domProps:{value:t.search},on:{input:function(e){e.target.composing||(t.search=e.target.value)}}}),e("button",{staticClass:"btnMP",on:{click:t.HandleSearch}},[t._v("Tìm")]),e("select",{directives:[{name:"model",rawName:"v-model",value:t.filter,expression:"filter"}],staticClass:"selectCss",on:{change:[function(e){var s=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.filter=e.target.multiple?s:s[0]},function(e){return t.onchange(e)}]}},t._l(t.listFilter,(function(s){return e("option",{key:s,domProps:{value:s}},[t._v(t._s(s))])})),0)]),e("b-skeleton-wrapper",{attrs:{loading:t.loading},scopedSlots:t._u([{key:"loading",fn:function(){return[e("div",{staticClass:"grid"},t._l(5,(function(t){return e("div",{key:t,staticClass:"item"},[e("b-card",{staticStyle:{height:"140px"},attrs:{"no-body":"","img-left":""}},[e("b-skeleton-img",{attrs:{"card-img":"left",width:"140px"}}),e("b-card",{staticStyle:{width:"850px",height:"140px"}},[e("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"70%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"85%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"55%"}}),e("b-skeleton",{attrs:{animation:"wave",width:"70%"}})],1)],1)],1)})),0)]},proxy:!0}])},[e("div",{staticClass:"grid"},t._l(t.listPosts,(function(s){return e("div",{key:s.id,staticClass:"item"},[e("router-link",{attrs:{to:{name:"PostDetail",query:{id:s.id}}}},[e("img",{staticClass:"post-image",attrs:{src:s.image}})]),e("div",{staticClass:"info"},[e("div",{staticClass:"post-title"},[t._v(t._s(s.title))]),e("label",{staticClass:"post-content"},[t._v("Ngày đăng: "),e("strong",[t._v(t._s(t._f("formatDate")(s.createdDate)))])]),"Approved"==s.status?e("label",{staticClass:"post-content"},[t._v("Trạng thái: "),e("strong",[t._v("Đã được duyệt")])]):t._e(),"Denied"==s.status?e("label",{staticClass:"post-content"},[t._v("Trạng thái: "),e("strong",[t._v("Đã bị hủy")])]):t._e(),"Waiting"==s.status?e("label",{staticClass:"post-content"},[t._v("Trạng thái: "),e("strong",[t._v("Đang đợi duyệt")])]):t._e(),e("label",{staticClass:"post-content"},[t._v(t._s(s.content))])]),e("div",{staticClass:"gr-btn"},[e("button",{staticClass:"item-btn",on:{click:function(e){return t.openEditPostDialog(s.id)}}},[t._v("Sửa")]),"Approved"==s.status?e("div",[s.isHide?e("button",{staticClass:"item-btn",on:{click:function(e){return t.HandleShow(s.id)}}},[t._v("Hiện")]):e("button",{staticClass:"item-btn",on:{click:function(e){return t.HandleHide(s.id)}}},[t._v("Ẩn")])]):t._e()])],1)})),0)]),e("div",{staticClass:"paging"},[e("div",{staticClass:"page"},[""==t.filter?e("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPosts},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:s,active:a}){return[a?e("b",{staticStyle:{color:"white"}},[t._v(t._s(s)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(s))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Tất Cả"==t.filter?e("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPosts},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:s,active:a}){return[a?e("b",{staticStyle:{color:"white"}},[t._v(t._s(s)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(s))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đã Duyệt"==t.filter?e("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPostsApproved},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:s,active:a}){return[a?e("b",{staticStyle:{color:"white"}},[t._v(t._s(s)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(s))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đã Hủy"==t.filter?e("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPostsDenied},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:s,active:a}){return[a?e("b",{staticStyle:{color:"white"}},[t._v(t._s(s)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(s))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e(),"Đang Đợi"==t.filter?e("b-pagination",{attrs:{"total-rows":t.totalPost,"per-page":5},on:{input:t.getMyPostsWaiting},scopedSlots:t._u([{key:"first-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹‹")])]},proxy:!0},{key:"prev-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("‹")])]},proxy:!0},{key:"next-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("›")])]},proxy:!0},{key:"last-text",fn:function(){return[e("span",{staticStyle:{color:"#9D6B54"}},[t._v("››")])]},proxy:!0},{key:"page",fn:function({page:s,active:a}){return[a?e("b",{staticStyle:{color:"white"}},[t._v(t._s(s)+" ")]):e("b",{staticStyle:{color:"#9D6B54"}},[t._v(t._s(s))])]}}],null,!1,1684021845),model:{value:t.page,callback:function(e){t.page=e},expression:"page"}}):t._e()],1)])],1)])],1)])])},i=[],n=s("cde1"),o=s("fbfb"),l=s("2314"),r=s("ebad"),c=s("48ac"),p=s.n(c),h=s("482f"),u=s("e2e4"),d={name:"MyPosts",components:{SideBar_Personal:l["a"],Layout:r["a"],LoadingDialog:h["a"],CreatePostDialog:u["a"]},data(){return{loading:!1,listPosts:"",totalPost:"",post:"",userId:"",listFilter:["Tất Cả","Đã Duyệt","Đã Hủy","Đang Đợi"],filter:"Tất Cả",page:1,search:"",isSearch:!1,spinner:!1,showDialog:!1}},created(){this.getMyPosts(1)},methods:{onchange(t){this.isSearch=!1,this.search="","Tất Cả"===t.target.value&&this.getMyPosts(1),"Đã Duyệt"===t.target.value&&this.getMyPostsApproved(1),"Đã Hủy"===t.target.value&&this.getMyPostsDenied(1),"Đang Đợi"===t.target.value&&this.getMyPostsWaiting(1)},getMyPosts(t){window.scroll(0,0),this.loading=!0;let e=this.$cookies.get("token");this.userByToken=p.a.decode(e,"utf-8"),this.isSearch?n["a"].callApi(o["j"].SEARCH_MY_POST+"?page="+t,"POST",{userId:this.userByToken.UserId,search:this.search}).then(e=>{this.listPosts=e.data.data,this.totalPost=e.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{}):n["a"].callApi(o["j"].LIST_POST+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(t=>{this.listPosts=t.data.data,this.totalPost=t.data.numberOfRecords,this.loading=!1}).catch(()=>{})},getMyPostsApproved(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let e=this.$cookies.get("token");this.userByToken=p.a.decode(e,"utf-8"),n["a"].callApi(o["j"].LIST_POST_APPROVED+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(e=>{this.listPosts=e.data.data,this.totalPost=e.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{})},getMyPostsDenied(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let e=this.$cookies.get("token");this.userByToken=p.a.decode(e,"utf-8"),n["a"].callApi(o["j"].LIST_POST_DENIED+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(e=>{this.listPosts=e.data.data,this.totalPost=e.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{})},getMyPostsWaiting(t){window.scroll(0,0),this.loading=!0,this.isSearch=!1;let e=this.$cookies.get("token");this.userByToken=p.a.decode(e,"utf-8"),n["a"].callApi(o["j"].LIST_POST_WAITING+"?page="+t,"POST",{userId:this.userByToken.UserId}).then(e=>{this.listPosts=e.data.data,this.totalPost=e.data.numberOfRecords,this.page=t,this.loading=!1}).catch(()=>{})},HandleHide(t){this.spinner=!0,n["a"].callApi(o["k"].HIDE_POST+t,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(""===this.filter&&this.getMyPosts(this.page),"Tất Cả"===this.filter&&this.getMyPosts(this.page),"Đã Duyệt"===this.filter&&this.getMyPostsApproved(this.page),"Đã Hủy"===this.filter&&this.getPostsDenied(this.page),"Đang Đợi"===this.filter&&this.getMyPostsWaiting(this.page),this.spinner=!1)}).catch(()=>{alert("Ẩn không thành công!")})},HandleShow(t){this.spinner=!0,n["a"].callApi(o["k"].SHOW_POST+t,"PUT",{}).then(t=>{"SUCCESS"===t.data.message&&(""===this.filter&&this.getMyPosts(this.page),"Tất Cả"===this.filter&&this.getMyPosts(this.page),"Đã Duyệt"===this.filter&&this.getMyPostsApproved(this.page),"Đã Hủy"===this.filter&&this.getPostsDenied(this.page),"Đang Đợi"===this.filter&&this.getMyPostsWaiting(this.page),this.spinner=!1)}).catch(()=>{alert("Ẩn không thành công!")})},HandleSearch(){return this.search?(this.filter="",this.isSearch=!0):(this.filter="Tất Cả",this.isSearch=!1),this.getMyPosts(1)},getPostById(t){this.spinner=!0;const e=o["g"].DETAIL_POST+t;n["a"].callApi(e,"GET",{}).then(t=>{this.post=t.data.data,this.spinner=!1}).catch(()=>{})},openEditPostDialog(t){this.getPostById(t),this.showDialog=!0},cancel(){this.showDialog=!1},save(){this.spinner=!0;const t=o["k"].UPDATE_POST+this.post.id;n["a"].callApi(t,"PUT",{title:this.post.title,content:this.post.content,image:this.post.image}).then(t=>{"UPDATE_SUCCESS"==t.data.message&&(""===this.filter&&this.getMyPosts(this.page),"Tất Cả"===this.filter&&this.getMyPosts(this.page),"Đã Duyệt"===this.filter&&this.getMyPostsApproved(this.page),"Đã Hủy"===this.filter&&this.getPostsDenied(this.page),"Đang Đợi"===this.filter&&this.getMyPostsWaiting(this.page),this.spinner=!1)}).catch(()=>{}),this.showDialog=!1},handleFileUpload(t){const e=document.querySelector("input[type=file]").files[0];var s=t.target.files;if(!s[0])return;const a=new FileReader;var i;a.onloadend=()=>{i=a.result,this.post.image=i},console.log(this.imageSrc),a.readAsDataURL(e)}},filters:{formatDate(t){return new Date(t).toLocaleString("en-GB")}}},g=d,v=(s("6998"),s("2877")),f=Object(v["a"])(g,a,i,!1,null,null,null);e["default"]=f.exports},e054:function(t,e,s){},e2e4:function(t,e,s){"use strict";var a=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"show"}],staticClass:"dialog"},[e("div",{staticClass:"dialogContent"},[t._t("default")],2)])},i=[],n={name:"CreatePostDialog",props:["show","cancel","save"]},o=n,l=(s("441e"),s("2877")),r=Object(l["a"])(o,a,i,!1,null,"dbfbe0e6",null);e["a"]=r.exports},ef67:function(t,e,s){"use strict";s("ae8c")}}]);
//# sourceMappingURL=chunk-6a9de931.bcc2b6f0.js.map